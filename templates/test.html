{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Khata</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
  <link rel="stylesheet" href="{% static 'index.css' %}" />
  <style>
    body {
      background: #f4f6f9;
      font-family: "Segoe UI", sans-serif;
      color: #333;
    }

    .container {
      margin-top: 40px;
    }

    .table-card {
      background: #fff;
      border-radius: 15px;
      box-shadow: 0px 4px 15px rgba(0, 0, 0, 0.1);
      overflow: hidden;
    }

    .table {
      margin-bottom: 0;
    }

    .table thead {
      background: linear-gradient(90deg, #0d6efd, #6610f2);
      color: #fff;
      font-size: 15px;
    }

    .table tbody tr {
      transition: all 0.2s ease-in-out;
    }

    .table tbody tr:hover {
      background: rgba(13, 110, 253, 0.05);
    }

    .table td,
    .table th {
      vertical-align: middle;
      text-align: center;
      padding: 12px;
    }

    .total-card {
      margin-top: 20px;
      background: #fff;
      border-radius: 15px;
      box-shadow: 0px 4px 15px rgba(0, 0, 0, 0.1);
      padding: 15px;
    }

    .btnwrap {
      margin-top: 25px;
    }

    .btn {
      border-radius: 30px;
      padding: 10px 25px;
      font-weight: 500;
    }

    .btn-primary {
      background: linear-gradient(90deg, #0d6efd, #6610f2);
      border: none;
    }

    .btn-dark {
      background: linear-gradient(90deg, #343a40, #212529);
      border: none;
    }

    .paymentbox .alert {
      border-radius: 12px;
      font-size: 14px;
      margin-bottom: 10px;
      box-shadow: 0px 3px 10px rgba(0, 0, 0, 0.08);
    }

    .mor,
    .dataform {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0px 4px 20px rgba(0, 0, 0, 0.15);
    }

    .mor h3,
    .dataform h3 {
      font-weight: 600;
    }
  </style>
</head>

<body>
  <div id="conatiner" class="container">
    <div class="tablecover">
      <table class="table tab1">
        <thead>
          <tr>
            <th scope="col">Date(MM-DD-YY)</th>
            <th scope="col">Manish</th>
            <th scope="col">Kazim</th>
            <th scope="col">Samay</th>
          </tr>
        </thead>
        
      </table>
    </div>

    <!-- Totals Section -->
    <div class="total-card">
      <h5 class="mb-3 fw-bold">Summary</h5>
      <div class="row text-center">
        <div class="col-md-4">
          <p>
            <strong>Manish:</strong> Rent -
            <span class="text-warning">{{discount_manish}}</span> =
            <span class="text-success">{{manish_total}} Rs</span>
          </p>
        </div>
        <div class="col-md-4">
          <p>
            <strong>Kazim:</strong> Rent -
            <span class="text-warning">{{discount_kazim}}</span> =
            <span class="text-success">{{kazim_total}} Rs</span>
          </p>
        </div>
        <div class="col-md-4">
          <p>
            <strong>Samay:</strong> Rent -
            <span class="text-warning">{{discount_samay}}</span> =
            <span class="text-success">{{samay_total}} Rs</span>
          </p>
        </div>
      </div>
    </div>
    <div class="btnwrap d-flex justify-content-around ">
      <div id="btn" class="btn btn-primary px-5">Add</div>
      <div id="exportbtn" class="btn btn-dark px-5">Export</div>
      <div id="dataform" class="dataform">
        <form action="/download_excel/" method='post'>
          {% csrf_token %}
          <div class="d-flex gap-5">
            <h3>Date: {{ date }}</h3> <span id="Warbtn2" class="btn btn-warning">X</span>
          </div>

          <div class="mb-3">
            <label for="exampleInputEmail1" class="form-label">from</label>
            <input name="from" type="date" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" />
          </div>
          <div class="mb-3">
            <label for="exampleInputEmail1" class="form-label">to</label>
            <input name="to" type="date" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" />
          </div>
          <button type="submit" id="downloadbtn" class="btn btn-dark px-5"> Download </button>
        </form>
      </div>
      {% comment %} <a href="/download_excel">
        <div id="download" class="btn  btn-dark px-5"> Download </div>
      </a> {% endcomment %}
    </div>
    <div id="mor_wrap" class="mor_wrap">
      <div id="mor" class="mor">
        <div class="d-flex gap-5">
          <h3>Date: {{ date }}</h3> <span id="Warbtn" class="btn btn-warning">X</span>
        </div>
        <form action="/" method="post">
          {% csrf_token %}
          <div class="mb-3">
            <label for="exampleInputEmail1" class="form-label">Price</label>
            <input required name="price" type="number" class="form-control" id="exampleInputEmail1"
              aria-describedby="emailHelp" />
          </div>
          <div class="mb-3">
            <label for="exampleInputPassword1" class="form-label">desc</label>
            <input required name="desc" type="text" class="form-control" id="exampleInputPassword1" />
          </div>




          <h3>Split with:</h3>
          {% for profile in online_users %}
          <label>
            <input type="checkbox" name="users" value="{{ profile.id }}" checked>
            {{ profile.username }}
          </label><br>
          {% empty %}
          <p>No users online</p>
          {% endfor %}

          <button type="submit">Create Expense</button>
        </form>

      </div>
    </div>
    <p class="text-center"><span class="fs-3">Room Rent:<span
          class="text-danger text-center fs-1 fw-bold">30000</span></span></p>
    <p class="text-center"><span class="fs-3">Total :<span
          class="text-success text-center fs-1 fw-bold">{{total}}</span></span></p>
    <div id="paymentbox" class="paymentbox ">
      {% for dess in objs %}
      <div class="alert alert-success  " role="alert">
        <span class="text-danger">{{dess.paymentby}}</span> Paid <span class="text-danger">{{dess.payment}}</span>Rs for
        <span class="text-danger">{{dess.desc}}</span> at {{dess.date}} {{dess.times}}
      </div>

      {% endfor %}
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>
  <script>
    let btn = document.getElementById("btn");
    let Warbtn = document.getElementById("Warbtn");
    let mor = document.getElementById("mor");
    let mor_wrap = document.getElementById("mor_wrap");
    let container = document.getElementById("container");
    let submit = document.getElementById("submit");
    let dataform = document.getElementById("dataform");
    let exportbtn = document.getElementById("exportbtn");
    let downloadbtn = document.getElementById("downloadbtn");
    let paymentbox = document.getElementById("paymentbox");
    btn.addEventListener("click", () => {
      mor.style.display = "block";
      mor_wrap.style.display = "flex";
      paymentbox.style.display = "none";


    });
    exportbtn.addEventListener("click", () => {
      mor_wrap.style.display = "flex";
      dataform.style.display = "block"
      paymentbox.style.display = "none"
    });
    downloadbtn.addEventListener("click", () => {
      mor_wrap.style.display = "none";
      dataform.style.display = "none"
      paymentbox.style.display = "block"
    });
    Warbtn.addEventListener("click", () => {
      mor.style.display = "none";
      mor_wrap.style.display = "none";
      paymentbox.style.display = "block"
    })
    Warbtn2.addEventListener("click", () => {
      dataform.style.display = "none"
      mor_wrap.style.display = "none";
      paymentbox.style.display = "block"
    })

    let id1 = document.getElementById("exampleCheck01");
    let id2 = document.getElementById("exampleCheck2");
    let id3 = document.getElementById("exampleCheck3");
    let paymentby = document.getElementById("paymentby");
    let paymentby2 = document.getElementById("paymentby2");
    function get1() {
      if (id1.checked) {
        id1.value = "yes";
        paymentby.value = "manish"
        paymentby2.value = "manish"
        console.log(id1);
      } else {
        id1.value = "no";
        console.log(id1);
      }
    }
    function get2() {
      if (id2.checked) {
        id2.value = "yes";
        paymentby.value = "kazim"
        paymentby2.value = "kazim"
        console.log(id2);
      } else {
        id2.value = "no";
        console.log(id2);
      }
    }
    function get3() {
      if (id3.checked) {
        id3.value = "yes";
        paymentby.value = "samay"
        paymentby2.value = "samay"
        console.log(id3);
      } else {
        id3.value = "no";
        console.log(id3);
      }
    }
    // Get all checkboxes
    const checkboxes = document.querySelectorAll(".single-check");

    checkboxes.forEach((checkbox) => {
      checkbox.addEventListener("change", function () {
        if (this.checked) {
          // Uncheck all other checkboxes
          checkboxes.forEach((cb) => {
            if (cb !== this) cb.checked = false;
          });
        }
      });
    });
  </script>
</body>

</html>


